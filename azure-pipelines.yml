trigger:
- none
variables:
- group: Ansible

pool:
  name: lab
  
steps:

====================================AUTO GENERATED BY CONFLICT EXTENSION====================================

- task: Bash@3
  inputs:
    targetType: 'inline'
    script: 'cp -r kubernetes/cluster /share/'
    workingDirectory: '$(Build.SourcesDirectory)'
  displayName: Coppy cluster fille

>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>AUTO GENERATED BY CONFLICT EXTENSION>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> kubernetes
- task: Ansible@0
  inputs:
    ansibleInterface: 'remoteMachine'
    connectionOverSsh: 'ansible'

====================================AUTO GENERATED BY CONFLICT EXTENSION====================================
    playbookSourceRemoteMachine: 'agentMachine'
    playbookRootRemoteMachine: '$(Build.SourcesDirectory)'
    playbookPathLinkedArtifactOnRemoteMachine: 'kubernetes/kubernetes.yaml'
    inventoriesRemoteMachine: 'file'
    inventoryFileSourceRemoteMachine: 'agentMachine'
    inventoryFileLinkedArtifactOnRemoteMachine: 'kubernetes/inventory/hosts'
    args: --extra-vars '{"password":"$(kube.password)", "build_dir":"$(Build.SourcesDirectory)"}' -vv

- task: Bash@3
  inputs:
    targetType: 'inline'
    script: 'rm -rf /share/cluster'
    workingDirectory: '$(Build.SourcesDirectory)'
  displayName: Delete cluster fille
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>AUTO GENERATED BY CONFLICT EXTENSION>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> kubernetes